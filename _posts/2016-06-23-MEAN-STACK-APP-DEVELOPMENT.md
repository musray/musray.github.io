---
layout: post
title: 一款基于MEAN Stack的Web App开发日记（一）
permalink: MEAN-Stack-App-Development-Note-1
---

## 实践，是学习不可分割的一部分

前一段时间在edx上学了一门基于Node的MongooDB开发课程。虽然名叫MongooDB课程，但实际课程内容涵盖了一套完整的MEAN Stack开发过程，最终实现了一个电商网站的后端、浏览器端和移动端三部分功能。
这半年虽然学的断断续续，但已经基本了解了MEAN Stack应用的架构，尤其是后端功能的开发和API的编写方法对我来说尤为重要，找到了彻底打通任督二脉的畅快感。
既然都说Learn by doing才是最好的学习方式，那不如赶紧趁热打铁实现一款MEAN Stack的应用，通过解决工作中的实际问题达到巩固知识、锻炼能力的目标。

## 提需求

不知道专业的开发需求是什么样的，我给自己的需求是这么提的：

### 核心功能需求
通过模版、自动化流程，来实现基于Word和Excel文档的批量生成。
例如，用户在浏览器中输入以下内容：

- 文件名称
- 文件编码
- 文件版本
- 文件编写、检查人员
表格提交后，后端根据用户提交的信息，选择正确的模版来生成文件的封面页、历史版本记录页、文件发布所需清单、表格等docx或xlsx文件。

### 前端需求

1. 提供用户输入的表单
2. 表单要区分不同的项目、不同的文件类型
3. 如果某一类型的文件可以关联多个文件，则列出所有可能的关联文件，用户可以选择全部生成或部分生成。例如，一份控制柜接线图，会对应封面、检查内内容表、问题解决单三种文档模版。默认是一次性生成三份文档，但用户可以选择仅生成其中任意某项
4. 文件历史版本及信息读取（涉及到MongooDB API）
5. 用户输入数据的格式校验
6. 涉及历史版本的文章，要可以直接从数据库导出该文件历史版本信息
7. 用户可以对各类信息进行补充

### 后端逻辑需求

1. HTTP Request 和 Response
2. 主线业务逻辑
	- 根据项目、文件类型的不同，确定所要使用的文件模版
	- Parse用户提交的数据，生成数据模型
	- 将数据模型应用于相应的文件模版，并生成docx或xlsx文件（此处是生成buffer，还是在文件系统中保存文档，有待尝试）
	- 将用户所需的文件打包成.zip格式，通过浏览器下载给用户
3. 辅助功能
	- 用户提交信息中的部分内容，会写到数据库（主要是提交缺失的文档版本信息）
	- 新提交的文档信息，要更新到数据库（多次提交同一entry的信息，如何校验与迭代？）

### 数据库与API

1. 数据库的数据结构中，以文档唯一确定的标识符（例如19位编码）作为最主要的index
2. 只有带有“版本”概念的文档，才需要在数据库中保存数据
3. API要查询并返回一份文档所有历史版本的记录

## 鼓励自己
已经知道该做什么了，利用已有的知识，一步一步的向目标前进吧。
困难一定是很大的，所以这东西才有坚持做成的必要。
无论别人看不看好，做成就是收获。
